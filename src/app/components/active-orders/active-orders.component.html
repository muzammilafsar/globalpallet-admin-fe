<h2 style="text-align: center;">Active Orders</h2>

<!-- listing of products (this part will be copied to angular app, above given data is same in all pages) -->

<div class="container main">
    <div class="row">
        <div class="col-md-12" id="customer-orders">

            <div class="box">

                <!-- <ng-container *ngFor="let i of orders"> 
                    <div *ngIf="orders.length === 0" style="min-height: 15em; margin: 5em 0 8em 0">
                      <h4>No Order Placed Yet  :(</h4>
                    </div>
                </ng-container> -->

                <div class="table-responsive">
                    <table class="table table-hover css-serial" rules="all">
                        <thead>
                            <tr>
                                <th>Order No.</th>
                                <th>CountDown</th>
                                <th>Mobile No.</th>
                                <th>Name</th>
                                <th>QuantityAndNameOfProduct</th>
                                <th>NameOfProductAndPrice</th>
                                <th>PriceToPay</th>
                                <th>Instructions</th>
                                <th>COD</th>
                                <th>Coupon</th>
                                <th>Delivery Charged?</th>
                                <th>Order Date</th>
                                <th>DeliveryAddressForDelivery</th>
                                <th>Device</th>
                                <th>Assigned To ?</th>
                                <th>Change Status</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let i of orders">

                                <th><h3><span class="label label-primary">{{i.order_special_id}}</span></h3></th>

                                <th><app-countdown [date]="i.order_date"></app-countdown></th>
                                <!-- <td>{{timeLeft}} <button (click)='startTimer()'>Start</button></td> -->

                                <td>{{i.mobile}}</td>

                                <td>{{i?.delivery_address?.first_name}}</td>

                                <td>
                                    <ol style="padding: 0 0 0 12px;">
                                        <li style="padding: 0 0 0 10px;" *ngFor="let it of i.items"><span style="color: #c4224c; font-weight: bold">{{it.quantity}}</span> x {{it.product.name}}<span style="color: #c4224c;" >-({{it.product.size_1}}) (Rs.{{it.price}})</span></li>  <!-- -{{it['product'][it.size]}} -->
                                    </ol>
                                </td>

                                <td>
                                    <ol style="padding: 0 0 0 12px;">
                                        <li style="padding: 0 0 0 10px;" *ngFor="let it of i.items">{{it.product.original}}</li>
                                    </ol>
                                </td>

                                <td>
                                    <h3>{{i.total_price}}</h3>
                                    [ {{i.actual_price}} - {{i.applied_coupon_discount ? i.applied_coupon_discount : 0}} ]
                                </td>

                                <td>{{i.instruction}}</td>

                                <td *ngIf="i.cod"><span class="label label-success">Yes</span></td>
                                <td *ngIf="!i.cod"><span class="label label-danger">No</span></td>

                                <td>{{i.coupon_applied ? i.applied_coupon_name : '‚ùå'}}</td>

                                <td>{{i.delivery_charge}}</td>

                                <td>{{i.order_date | date : "dd.MM.y hh:mm:ss a"}}</td>

                                <td width="100">({{i.delivery_address.title ? i.delivery_address.title : 'Default'}}) - {{i.delivery_address.first_name}}, {{i.delivery_address.address}}, {{i.delivery_address.address2}}, {{i.delivery_address.state}}, Locality:- {{i.delivery_address.locality}}</td>

                                <td>{{i.device}}</td>

                                <td>
                                    <img *ngIf="i.delivery_boy" id="pImg" style="padding: 0.4em 0.4em 0.4em 0.4em; height: 6em; width: 6em" class="img-fluid" src={{i.delivery_boy.photo}}> 
                                    <p>{{i.assigned_to ? i.assigned_to : 'TBA'}}</p>    
                                </td>

                                <td>
                                 <!-- <button type="button" class="btn btn-success"(click)="completeOrder(i._id, i.mobile)">Complete Order</button> -->
                                 <button type="button" class="btn btn-primary"(click)="editOrder(i._id)">Edit Order</button>
                                </td>

                            </tr>

                        </tbody>
                    </table>
                </div>
                <!-- /.table-responsive -->

            </div>
            <!-- /.box -->


        </div>
    </div>
</div>

